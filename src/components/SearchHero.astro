---
/**
 * SearchHero - Main homepage hero with search
 * Extracted from index.astro to support MDX-driven architecture
 */
import { getCollection } from 'astro:content';
import Search from './Search';
import type { DocEntry } from '@/types/content';

// Get all docs for search functionality
// Note: Astro's content layer caches this data, so multiple getCollection calls
// in different components don't cause duplicate fetches
const allDocs = await getCollection('docs');

// Prepare search data
const searchDocs = allDocs.map((doc: DocEntry) => ({
  slug: doc.slug,
  title: doc.data?.title,
  description: doc.data?.description
}));
---

<header class="hero-header">
  <h1 class="hero-title">
    goingdark.social Wiki
  </h1>
  <p class="hero-subtitle">
    Documentation for our privacy-focused Mastodon instance
  </p>

  <!-- DOMINANT SEARCH BAR -->
  <div class="relative">
    <Search client:load docs={searchDocs} />
    <div class="hero-kbd-container">
      <kbd class="hero-kbd">Ctrl+K</kbd>
      <span>to search</span>
    </div>
  </div>
</header>
