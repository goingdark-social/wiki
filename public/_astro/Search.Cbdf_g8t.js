import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.DiEladB3.js";function w({docs:u,prefix:a=""}){const[n,h]=r.useState(""),[l,o]=r.useState(!1),[i,m]=r.useState([]),[x,p]=r.useState(0),c=r.useRef(null);return r.useEffect(()=>{if(n.trim().length<2){queueMicrotask(()=>{m([]),o(!1)});return}const t=n.toLowerCase(),s=u.filter(d=>{const f=d.title.toLowerCase().includes(t),b=d.slug.toLowerCase().includes(t),g=d.description?.toLowerCase().includes(t);return f||b||g}).slice(0,8);queueMicrotask(()=>{m(s),o(!0),p(0)})},[n,u]),r.useEffect(()=>{function t(s){c.current&&!c.current.contains(s.target)&&o(!1)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),r.useEffect(()=>{function t(s){(s.ctrlKey||s.metaKey)&&s.key==="k"&&(s.preventDefault(),document.getElementById(`${a}wiki-search-input`)?.focus())}return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[a]),e.jsxs("div",{className:"relative",ref:c,children:[e.jsx("label",{htmlFor:`${a}wiki-search-input`,className:"sr-only",children:"Search wiki documentation"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{id:`${a}wiki-search-input`,type:"text",role:"combobox",value:n,onInput:t=>h(t.target.value),placeholder:"Search wiki...",className:"search-input","aria-label":"Search wiki documentation","aria-autocomplete":"list","aria-expanded":l,"aria-controls":`${a}search-results`,"aria-haspopup":"listbox"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 text-text-muted group-focus-within:text-primary transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("kbd",{className:"absolute right-3 top-1/2 -translate-y-1/2 px-2 py-1 bg-surface-750 border border-surface-700 rounded-sm text-xs text-text-subtle font-mono hidden sm:inline-block",children:"Ctrl+K"})]}),l&&i.length>0&&e.jsx("div",{id:`${a}search-results`,role:"listbox",className:"absolute z-30 w-full mt-2 bg-surface-800/95 backdrop-blur-lg border border-surface-700 rounded-lg shadow-lg overflow-hidden pattern-noise",children:e.jsx("div",{className:"p-2",children:i.map((t,s)=>e.jsxs("a",{href:`/docs/${t.slug}`,className:"group flex items-start gap-3 px-3 py-3 min-h-[44px] hover:bg-primary/10 hover:border-l-2 hover:border-primary transition-all rounded-md border-b border-surface-700/50 last:border-b-0",role:"option","aria-selected":s===x,onClick:()=>o(!1),children:[e.jsx("div",{className:"shrink-0 w-6 h-6 rounded-sm bg-secondary-subtle flex items-center justify-center text-secondary-dark text-xs font-bold mt-0.5",children:s+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-white group-hover:text-primary transition-all truncate",children:t.title}),e.jsx("div",{className:"text-xs text-text-muted mt-1 font-mono truncate",children:t.slug})]}),e.jsx("svg",{className:"w-5 h-5 text-text-subtle group-hover:text-primary transition-all shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]},t.slug))})}),l&&n.length>=2&&i.length===0&&e.jsx("div",{className:"absolute z-30 w-full mt-2 bg-surface-800/95 backdrop-blur-lg border border-surface-700 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-text-subtle mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-sm text-text-muted",children:["No results found for ",e.jsxs("span",{className:"text-text-white font-medium",children:['"',n,'"']})]}),e.jsx("p",{className:"text-xs text-text-subtle mt-2",children:"Try a different search term"})]})})]})}export{w as default};
